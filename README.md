# Near Ride Backend API

ä¸€å€‹åŸºæ–¼ FastAPI çš„å¾Œç«¯ API æœå‹™ï¼Œæä¾›ç”¨æˆ¶ç®¡ç†ã€GPS å®šä½è¿½è¹¤ã€èŠå¤©ã€æœ‹å‹é—œä¿‚å’Œèˆˆè¶£æ„›å¥½ç®¡ç†åŠŸèƒ½ã€‚

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚
- Python 3.11+
- PostgreSQL è³‡æ–™åº«

### å®‰è£ä¾è³´
```bash
pip install -r requirements.txt
```

### å•Ÿå‹•æœå‹™
```bash
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
near-ride-backend-api/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py                    # FastAPI æ‡‰ç”¨å…¥å£
â”‚   â”œâ”€â”€ database.py                # è³‡æ–™åº«é…ç½®
â”‚   â”œâ”€â”€ models/                    # è³‡æ–™æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ user.py               # ç”¨æˆ¶æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ gps_route.py          # GPS å®šä½æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ chat.py               # èŠå¤©æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ hobby.py              # æ„›å¥½æ¨¡å‹
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ routes/                    # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ user_routes.py        # ç”¨æˆ¶ç›¸é—œ API
â”‚   â”‚   â”œâ”€â”€ gps_routes.py         # GPS å®šä½ API
â”‚   â”‚   â”œâ”€â”€ chat_routes.py        # èŠå¤© API
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ services/                  # æ¥­å‹™é‚è¼¯æœå‹™
â”‚       â””â”€â”€ connection_manager.py  # WebSocket é€£æ¥ç®¡ç†
â”œâ”€â”€ gps/                          # ğŸ“ GPS ç³»çµ±å°ˆç”¨è³‡æ–™å¤¾
â”‚   â”œâ”€â”€ README.md                 # GPS ç³»çµ±èªªæ˜
â”‚   â”œâ”€â”€ ARCHITECTURE.md           # GPS æ¶æ§‹æ–‡æª”
â”‚   â”œâ”€â”€ docs/                     # GPS æ–‡æª”
â”‚   â”œâ”€â”€ tests/                    # GPS æ¸¬è©¦æª”æ¡ˆ
â”‚   â”œâ”€â”€ frontend/                 # å‰ç«¯æ•´åˆç¯„ä¾‹
â”‚   â””â”€â”€ legacy/                   # èˆŠç‰ˆæœ¬æª”æ¡ˆ
â”œâ”€â”€ requirements.txt              # Python ä¾è³´
â””â”€â”€ README.md                     # å°ˆæ¡ˆèªªæ˜ï¼ˆæœ¬æª”æ¡ˆï¼‰
```

### åŸ·è¡Œæ¸¬è©¦
```bash
python test_comprehensive.py
```

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
near-ride-backend-api/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ models/          # è³‡æ–™åº«æ¨¡å‹
â”‚   â”œâ”€â”€ routes/          # API è·¯ç”±
â”‚   â”œâ”€â”€ services/        # æ¥­å‹™é‚è¼¯æœå‹™
â”‚   â”œâ”€â”€ database.py      # è³‡æ–™åº«é…ç½®
â”‚   â””â”€â”€ main.py          # æ‡‰ç”¨ç¨‹å¼å…¥å£
â”œâ”€â”€ test_comprehensive.py   # ç¶œåˆæ¸¬è©¦
â”œâ”€â”€ gps_frontend_integration.js  # å‰ç«¯æ•´åˆç¯„ä¾‹
â”œâ”€â”€ GPS_API_Documentation.md     # GPS API æ–‡æª”
â””â”€â”€ requirements.txt     # Python ä¾è³´
```

## ğŸ”§ ä¸»è¦åŠŸèƒ½

### ç”¨æˆ¶ç®¡ç†
- ç”¨æˆ¶è¨»å†Šã€ç™»å…¥ã€è³‡æ–™æ›´æ–°
- ç”¨æˆ¶è³‡æ–™æŸ¥è©¢å’Œç®¡ç†

### GPS è·¯ç·šè¿½è¹¤
- GPS è·¯ç·šè³‡æ–™ä¸Šå‚³å’Œå„²å­˜
- æ­·å²è·¯ç·šæŸ¥è©¢å’Œç®¡ç†
- æ”¯æ´ JSON æ ¼å¼è·¯ç·šè³‡æ–™

### èŠå¤©åŠŸèƒ½
- å³æ™‚èŠå¤©è¨Šæ¯
- WebSocket æ”¯æ´

### æœ‹å‹é—œä¿‚
- æœ‹å‹é‚€è«‹å’Œç®¡ç†
- é™„è¿‘ç”¨æˆ¶æœå°‹

### èˆˆè¶£æ„›å¥½
- ç”¨æˆ¶èˆˆè¶£æ¨™ç±¤ç®¡ç†
- èˆˆè¶£åŒ¹é…åŠŸèƒ½

## ğŸŒ API ç«¯é»

### ç”¨æˆ¶ API
- `POST /users/` - å‰µå»ºç”¨æˆ¶
- `GET /users/{id}` - æŸ¥è©¢ç”¨æˆ¶
- `PUT /users/{id}` - æ›´æ–°ç”¨æˆ¶
- `DELETE /users/{id}` - åˆªé™¤ç”¨æˆ¶

### GPS API
- `POST /gps/upload` - ä¸Šå‚³ GPS è·¯ç·š
- `GET /gps/{user_id}/{date}` - æŸ¥è©¢æŒ‡å®šæ—¥æœŸè·¯ç·š
- `GET /gps/{user_id}/routes` - æŸ¥è©¢è·¯ç·šæ­·å²
- `DELETE /gps/{user_id}/{date}` - åˆªé™¤è·¯ç·š

### å…¶ä»– API
è«‹åƒè€ƒå„æ¨¡çµ„çš„è·¯ç”±æ–‡ä»¶æˆ– API æ–‡æª”ã€‚

## ğŸ—„ï¸ è³‡æ–™åº«

ä½¿ç”¨ PostgreSQL è³‡æ–™åº«ï¼Œé€é SQLAlchemy ORM é€²è¡Œè³‡æ–™å­˜å–ã€‚

ä¸»è¦è³‡æ–™è¡¨ï¼š
- `users` - ç”¨æˆ¶è³‡æ–™
- `gps_routes` - GPS è·¯ç·šè³‡æ–™
- `gps_points` - GPS é»ä½è³‡æ–™
- `chat_messages` - èŠå¤©è¨Šæ¯
- `user_status` - ç”¨æˆ¶ç‹€æ…‹
- `hobbies` - èˆˆè¶£æ„›å¥½

## ğŸ§ª æ¸¬è©¦

åŸ·è¡Œç¶œåˆæ¸¬è©¦ï¼š
```bash
python test_comprehensive.py
```

æ¸¬è©¦åŒ…å«ï¼š
- ä¼ºæœå™¨é€£æ¥æ¸¬è©¦
- GPS åŠŸèƒ½æ¸¬è©¦
- ç”¨æˆ¶ç®¡ç†æ¸¬è©¦

## ğŸ“ æˆæ¬Š

æœ¬å°ˆæ¡ˆåƒ…ä¾›å­¸ç¿’å’Œé–‹ç™¼ä½¿ç”¨ã€‚
